# Baseline Algorithm Definitions
#
# These are well-validated, production-ready algorithms for event intelligence analysis.
# Each algorithm includes metadata, requirements, validation metrics, and execution info.

algorithms:
  # ============================================================================
  # FLOOD DETECTION ALGORITHMS
  # ============================================================================

  flood.baseline.threshold_sar:
    name: "SAR Backscatter Threshold"
    category: "baseline"
    version: "1.0.0"
    description: |
      Simple yet effective flood detection using SAR backscatter thresholding.
      Water bodies exhibit low backscatter in SAR imagery. This algorithm identifies
      pixels below a calibrated threshold as potential flood areas.

    event_types:
      - "flood.*"

    required_data_types:
      - "sar"

    optional_data_types:
      - "dem"
      - "ancillary"

    required_bands: []

    required_polarizations:
      - "VV"

    resources:
      memory_mb: 2048
      gpu_required: false
      max_runtime_minutes: 10
      distributed: false

    validation:
      accuracy_min: 0.75
      accuracy_max: 0.92
      accuracy_median: 0.85
      precision: 0.82
      recall: 0.88
      f1_score: 0.85
      validated_regions:
        - "North America"
        - "Europe"
        - "Asia"
      validation_dataset_count: 47
      last_validated: "2024-08-15"

    deterministic: true
    seed_required: false
    supports_tiled: true

    module_path: "core.analysis.library.baseline.flood.threshold_sar"
    class_name: "SARThresholdFloodDetection"

    default_parameters:
      threshold_db: -15.0
      min_area_pixels: 100
      apply_speckle_filter: true
      kernel_size: 5

    parameter_schema:
      threshold_db:
        type: "number"
        minimum: -25.0
        maximum: -5.0
        description: "Backscatter threshold in dB"
      min_area_pixels:
        type: "integer"
        minimum: 1
        description: "Minimum flood polygon area in pixels"

    outputs:
      - "flood_extent"
      - "confidence_map"

    references:
      - "Martinis et al. (2015) - Automated SAR Flood Detection"
      - "Clement et al. (2018) - Multi-temporal SAR Analysis"

    added_date: "2024-01-15"
    last_updated: "2024-08-15"
    deprecated: false

  # --------------------------------------------------------------------------

  flood.baseline.ndwi_optical:
    name: "NDWI Optical Water Detection"
    category: "baseline"
    version: "1.0.0"
    description: |
      Normalized Difference Water Index (NDWI) using optical imagery.
      Exploits the difference between green and NIR reflectance to identify water.
      Works best in cloud-free conditions.

    event_types:
      - "flood.*"

    required_data_types:
      - "optical"

    required_bands:
      - "green"
      - "nir"

    resources:
      memory_mb: 1024
      gpu_required: false
      max_runtime_minutes: 5

    validation:
      accuracy_min: 0.80
      accuracy_max: 0.95
      accuracy_median: 0.88
      precision: 0.90
      recall: 0.86
      f1_score: 0.88
      validated_regions:
        - "Global"
      validation_dataset_count: 63
      last_validated: "2024-09-01"

    deterministic: true
    seed_required: false
    supports_tiled: true

    module_path: "core.analysis.library.baseline.flood.ndwi_optical"
    class_name: "NDWIFloodDetection"

    default_parameters:
      ndwi_threshold: 0.3
      cloud_mask: true
      min_area_pixels: 50

    outputs:
      - "flood_extent"
      - "ndwi_map"

    references:
      - "McFeeters (1996) - The use of NDWI"
      - "Xu (2006) - Modified NDWI"

    added_date: "2024-01-20"
    last_updated: "2024-09-01"

  # --------------------------------------------------------------------------

  flood.baseline.change_detection:
    name: "Pre/Post Change Detection"
    category: "baseline"
    version: "1.0.0"
    description: |
      Temporal change detection comparing pre-event and post-event imagery.
      Identifies newly flooded areas by detecting significant backscatter/reflectance changes.

    event_types:
      - "flood.*"

    required_data_types:
      - "sar"

    optional_data_types:
      - "optical"

    resources:
      memory_mb: 4096
      gpu_required: false
      max_runtime_minutes: 15

    validation:
      accuracy_min: 0.82
      accuracy_max: 0.94
      accuracy_median: 0.89
      f1_score: 0.88
      validated_regions:
        - "North America"
        - "Europe"
      validation_dataset_count: 31
      last_validated: "2024-07-20"

    deterministic: true

    module_path: "core.analysis.library.baseline.flood.change_detection"
    class_name: "ChangeDetectionFlood"

    default_parameters:
      change_threshold_db: 3.0
      temporal_window_days: 30

    outputs:
      - "flood_extent"
      - "change_map"

    added_date: "2024-02-01"
    last_updated: "2024-07-20"

  # --------------------------------------------------------------------------

  flood.baseline.hand_model:
    name: "Height Above Nearest Drainage"
    category: "baseline"
    version: "1.0.0"
    description: |
      Topography-based flood susceptibility using HAND model.
      Identifies areas at risk based on elevation relative to nearest drainage.
      Can be combined with observed water extent for enhanced mapping.

    event_types:
      - "flood.riverine"
      - "flood.fluvial"

    required_data_types:
      - "dem"

    optional_data_types:
      - "ancillary"

    resources:
      memory_mb: 8192
      gpu_required: false
      max_runtime_minutes: 30
      distributed: true

    validation:
      accuracy_min: 0.70
      accuracy_max: 0.88
      accuracy_median: 0.79
      validated_regions:
        - "North America"
        - "South America"
      validation_dataset_count: 18
      last_validated: "2024-06-10"

    deterministic: true

    module_path: "core.analysis.library.baseline.flood.hand_model"
    class_name: "HANDFloodModel"

    default_parameters:
      hand_threshold_m: 5.0
      drainage_area_km2: 1.0

    outputs:
      - "flood_susceptibility"
      - "hand_map"

    references:
      - "Renn√≥ et al. (2008) - HAND terrain descriptor"
      - "Nobre et al. (2016) - HAND for flood mapping"

    added_date: "2024-03-01"

  # ============================================================================
  # WILDFIRE DETECTION ALGORITHMS
  # ============================================================================

  wildfire.baseline.nbr_differenced:
    name: "Differenced Normalized Burn Ratio"
    category: "baseline"
    version: "1.0.0"
    description: |
      Gold standard for burn severity mapping using optical imagery.
      Compares NBR before and after fire event to quantify burn severity.

    event_types:
      - "wildfire.*"
      - "fire.*"

    required_data_types:
      - "optical"

    required_bands:
      - "nir"
      - "swir"

    resources:
      memory_mb: 2048
      gpu_required: false
      max_runtime_minutes: 10

    validation:
      accuracy_min: 0.85
      accuracy_max: 0.96
      accuracy_median: 0.91
      precision: 0.93
      recall: 0.89
      f1_score: 0.91
      validated_regions:
        - "Global"
      validation_dataset_count: 89
      last_validated: "2024-08-30"

    deterministic: true

    module_path: "core.analysis.library.baseline.wildfire.nbr_differenced"
    class_name: "DifferencedNBRAlgorithm"

    default_parameters:
      severity_thresholds:
        high: 0.66
        moderate: 0.44
        low: 0.27
      min_burn_area_ha: 1.0

    outputs:
      - "burn_extent"
      - "burn_severity"
      - "dnbr_map"

    references:
      - "Key & Benson (2006) - Landscape Assessment"
      - "Miller & Thode (2007) - NBR Quantification"

    added_date: "2024-01-25"
    last_updated: "2024-08-30"

  # --------------------------------------------------------------------------

  wildfire.baseline.thermal_anomaly:
    name: "Thermal Anomaly Detection"
    category: "baseline"
    version: "1.0.0"
    description: |
      Active fire detection using thermal infrared bands.
      Identifies high-temperature anomalies indicative of active burning.
      Works day and night, through smoke.

    event_types:
      - "wildfire.*"

    required_data_types:
      - "optical"

    required_bands:
      - "thermal"

    resources:
      memory_mb: 512
      gpu_required: false
      max_runtime_minutes: 3

    validation:
      accuracy_min: 0.78
      accuracy_max: 0.92
      accuracy_median: 0.85
      validated_regions:
        - "Global"
      validation_dataset_count: 124
      last_validated: "2024-09-10"

    deterministic: true

    module_path: "core.analysis.library.baseline.wildfire.thermal_anomaly"
    class_name: "ThermalAnomalyAlgorithm"

    default_parameters:
      temperature_threshold_k: 320
      contextual_algorithm: true

    outputs:
      - "active_fires"
      - "fire_radiative_power"

    references:
      - "Giglio et al. (2016) - MODIS Collection 6"
      - "Schroeder et al. (2014) - VIIRS active fire"

    added_date: "2024-02-10"
    last_updated: "2024-09-10"

  # --------------------------------------------------------------------------

  wildfire.baseline.ba_classifier:
    name: "Burned Area Classification"
    category: "baseline"
    version: "1.0.0"
    description: |
      Supervised classification for burned area mapping.
      Uses multiple spectral indices and texture features for robust detection.

    event_types:
      - "wildfire.*"

    required_data_types:
      - "optical"

    required_bands:
      - "red"
      - "nir"
      - "swir"

    resources:
      memory_mb: 3072
      gpu_required: false
      max_runtime_minutes: 20

    validation:
      accuracy_min: 0.83
      accuracy_max: 0.94
      accuracy_median: 0.88
      f1_score: 0.87
      validated_regions:
        - "North America"
        - "Australia"
        - "Mediterranean"
      validation_dataset_count: 42
      last_validated: "2024-07-15"

    deterministic: false
    seed_required: true

    module_path: "core.analysis.library.baseline.wildfire.ba_classifier"
    class_name: "BurnedAreaClassifierAlgorithm"

    default_parameters:
      classifier: "random_forest"
      n_estimators: 100
      random_seed: 42

    outputs:
      - "burn_extent"
      - "classification_confidence"

    added_date: "2024-02-20"

  # ============================================================================
  # STORM DAMAGE ALGORITHMS
  # ============================================================================

  storm.baseline.wind_damage:
    name: "Wind Damage Vegetation Detection"
    category: "baseline"
    version: "1.0.0"
    description: |
      Detects vegetation damage from high winds using change detection
      in vegetation indices (NDVI, EVI). Identifies areas of vegetation loss.

    event_types:
      - "storm.*"
      - "hurricane.*"
      - "cyclone.*"

    required_data_types:
      - "optical"

    required_bands:
      - "red"
      - "nir"

    resources:
      memory_mb: 2048
      gpu_required: false
      max_runtime_minutes: 12

    validation:
      accuracy_min: 0.72
      accuracy_max: 0.88
      accuracy_median: 0.80
      validated_regions:
        - "Caribbean"
        - "Southeast Asia"
      validation_dataset_count: 23
      last_validated: "2024-08-01"

    deterministic: true

    module_path: "core.analysis.library.baseline.storm.wind_damage"
    class_name: "WindDamageDetection"

    default_parameters:
      ndvi_change_threshold: -0.2
      min_damage_area_ha: 0.5

    outputs:
      - "damage_extent"
      - "damage_severity"

    added_date: "2024-03-10"

  # --------------------------------------------------------------------------

  storm.baseline.structural_damage:
    name: "Structural Damage Assessment"
    category: "baseline"
    version: "1.0.0"
    description: |
      Building and infrastructure damage assessment using high-resolution
      optical or SAR imagery. Detects changes in built-up areas.

    event_types:
      - "storm.*"
      - "hurricane.*"
      - "tornado.*"

    required_data_types:
      - "optical"

    optional_data_types:
      - "sar"
      - "ancillary"

    resources:
      memory_mb: 4096
      gpu_required: false
      max_runtime_minutes: 25
      distributed: true

    validation:
      accuracy_min: 0.68
      accuracy_max: 0.85
      accuracy_median: 0.76
      validated_regions:
        - "North America"
        - "Caribbean"
      validation_dataset_count: 17
      last_validated: "2024-06-20"

    deterministic: true

    module_path: "core.analysis.library.baseline.storm.structural_damage"
    class_name: "StructuralDamageAssessment"

    default_parameters:
      texture_analysis: true
      building_mask_required: false
      damage_categories: 4

    outputs:
      - "damage_map"
      - "damage_grade"
      - "confidence_map"

    references:
      - "Copernicus EMS Damage Assessment Guidelines"

    added_date: "2024-03-15"
